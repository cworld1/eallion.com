<header id="header">
    <span class="header__inner">
        {{ partial "logo.html" . }}
        <span class="header__right">
            {{ if len $.Site.Menus }} {{ partial "menu.html" . }}
            <span class="menu-trigger hidden">
                <span class="iconify-inline" data-icon="ant-design:menu-outlined"></span>
            </span>
            {{ end }}
            <!--
            <span class="theme-toggle">
                <span class="iconify-inline" data-icon="fluent:dark-theme-20-regular"></span>
            </span>
            -->
            <script>
                let storageColorScheme = localStorage.getItem("lightDarkMode")
                {{- if eq $.Site.Params.defaultTheme "light" }}
                if ((storageColorScheme == 'Auto' && window.matchMedia("(prefers-color-scheme: dark)").matches) || storageColorScheme == "Dark") {
                    document.body.classList.add('dark-theme')
                }
                {{- else if eq $.Site.Params.defaultTheme "dark" }}
                if ((storageColorScheme == 'Auto' && window.matchMedia("(prefers-color-scheme: light)").matches) || storageColorScheme == "Light") {
                    document.body.classList.remove('dark-theme')
                }
                {{- else }}
                if (((storageColorScheme == 'Auto' || storageColorScheme == null) && window.matchMedia("(prefers-color-scheme: dark)").matches) || storageColorScheme == "Dark") {
                    document.body.classList.add('dark-theme')
                }
                {{- end }}
            </script>
            <div class="lightDarkMode">
                <div class="lightDarkModes" id="lightDarkMode">
                    {{- if eq $.Site.Params.defaultTheme "dark" }}
                    <i class="iconify-inline" data-icon="akar-icons:moon-fill"></i>
                    {{- else if eq $.Site.Params.defaultTheme "light" }}
                    <i class="iconify-inline" data-icon="akar-icons:sun-fill"></i>
                    {{- else }}
                    <i class="iconify-inline" data-icon="bxs:adjust"></i>
                    {{- end }}
                </div>
                <div class="is-open hidden" id="is-open">
                </div>
                <div class="lightDarkOptions hidden" id='lightDarkOptions'>
                    <span class="lightDarkOption" name="Auto"><i class="iconify-inline" data-icon="bxs:adjust"></i> 跟随系统</span>
                    <span class="lightDarkOption" name="Light"><i class="iconify-inline" data-icon="akar-icons:sun-fill"></i> 总是浅色</span>
                    <span class="lightDarkOption" name="Dark"><i class="iconify-inline" data-icon="akar-icons:moon-fill"></i> 总是深色</span>
                </div>
            </div>
            <script>
                // change icon and add listener if auto
                let element = document.getElementById('lightDarkMode')
                {{- if eq $.Site.Params.defaultTheme "light" }}
                if (storageColorScheme == 'Auto') {
                    element.firstElementChild.setAttribute("data-icon", 'bxs:adjust')
                    document.addEventListener('DOMContentLoaded', () => {
                        window.matchMedia("(prefers-color-scheme: dark)").addEventListener('change', switchDarkMode)
                    })
                } else if (storageColorScheme == "Dark") {
                    element.firstElementChild.setAttribute("data-icon", 'akar-icons:moon-fill')
                }
                {{- else if eq $.Site.Params.defaultTheme "dark" }}
                if (storageColorScheme == 'Auto') {
                    element.firstElementChild.setAttribute("data-icon", 'bxs:adjust')
                    document.addEventListener('DOMContentLoaded', () => {
                        window.matchMedia("(prefers-color-scheme: dark)").addEventListener('change', switchDarkMode)
                    })
                } else if (storageColorScheme == "Light") {
                    element.firstElementChild.setAttribute("data-icon", 'akar-icons:sun-fill')
                }
                {{- else }}
                if (storageColorScheme == null || storageColorScheme == 'Auto') {
                    document.addEventListener('DOMContentLoaded', () => {
                        window.matchMedia("(prefers-color-scheme: dark)").addEventListener('change', switchDarkMode)
                    })
                } else if (storageColorScheme == "Light") {
                    element.firstElementChild.setAttribute("data-icon", 'akar-icons:sun-fill')
                } else if (storageColorScheme == "Dark") {
                    element.firstElementChild.setAttribute("data-icon", 'akar-icons:moon-fill')
                }
                {{- end }}

                document.addEventListener('DOMContentLoaded', () => {
                    getcolorscheme();
                });
            </script>
        </span>
    </span>
</header>
