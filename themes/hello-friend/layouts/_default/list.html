{{ define "head" }}
{{ if .Paginator.HasPrev -}}
<link rel="prefetch" href="{{ .Paginator.Prev.URL }}">{{- end }}
{{ if .Paginator.HasNext -}}
<link rel="prefetch" href="{{ .Paginator.Next.URL }}">{{- end }}
{{ end }}

{{ define "main" }}
{{ $contentTypeName := $.Site.Params.contentTypeName }}

{{ $PageContext := . }}
{{ if .IsHome }}
{{ $PageContext = .Site }}
{{ end }}
{{ $paginator := .Paginate (where $PageContext.RegularPages "Type" $contentTypeName) }}

<div class="posts">
    {{ range $paginator.Pages }}
    <div class="post on-list">
        <h1 class="post-title"><a href="{{ .Permalink }}">{{ .Title | markdownify }}</a></h1>
        <div class="post-meta">
            {{ if .Date }}
            <span class="post-date">
                {{ .Date.Format ($.Site.Params.DateFormatList | default "2006-01-02") }}
            </span>
            {{ end }}

            {{ if .Params.tags }}
            <span class="">
                {{ range .Params.tags }}
                #<a href="{{ (urlize (printf "tags/%s" . )) | absURL }}/">{{ . }}</a>&nbsp;
                {{ end }}
            </span>
            {{ end }}
        </div>

        {{ if .Params.feature }}
        {{ if .Params.UseRelativeCover }}
        <img loading='lazy' src="{{ (printf "%s%s" .Permalink .Params.feature ) }}" class="post-cover">
        {{ else }}
        <img loading='lazy' src="{{ .Params.feature | absURL }}" class="post-cover">
        {{ end }}
        {{ end }}

        <div class="post-content">
            {{ .Summary }}
        </div>
        {{ if .Truncated }}
        <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-shenglvehao"></use>
        </svg>
        <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-shenglvehao"></use>
        </svg>
        <div class="read-more-icon">
            <a class="read-more button" href="{{ .RelPermalink }}">
                {{ i18n "readMore" }}
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-chevrons-right"></use>
                </svg>
            </a>
        </div>
        {{ end }}
    </div>
    {{ end }}
    {{ partial "pagination.html" . }}
</div>
{{ end }}
