{{ define "main" }}
{{ $currentCategories := .Title }}
<div class="archive">

    <h1 class="post-title">分类：「{{ .Title }}」</h1>
    <hr />
    {{- range (where (where .Pages "Type" "in" (slice "post" "posts")) "Kind" "page").GroupByDate "2006" }}
    <div class="archive__group-posts">
        {{- range .Pages.GroupByDate "2006" }}
        <h3>{{ .Key }}</h3>
        <div class="archive__group-month">
            <div class="archive__post">
                {{ range .Pages }}
                <div class="archive__post-title">
                    <a href="{{ .Permalink }}">{{ .Title }} ( <i class="iconfont icon-folderOpen"></i><mark>{{ $currentCategories }}</mark> )
                        <span class="post-date">{{ .Date.Format (default "2006.01.02") }}</span>
                    </a>
                </div>
                {{ end }}
            </div>
        </div>
        {{- end }}
    </div>
    {{- end }}
    {{ if eq .Kind "taxonomy" }}
    <div id="all-categories">
        {{ range ($.Site.Taxonomies.categories.ByCount) }}
        <a href="/categories/{{ .Name | urlize }}"><i class="iconfont icon-folderOpen"></i>{{ .Name }}<small>({{ .Count }})</small></a>
        {{- end -}}
    </div>
    {{ end }}
    {{ partial "pagination-archives.html" . }}
</div>
<!--posts-group end-->
{{ end }}
