window.Lately=new function(){this.lang={second:"秒",minute:"分钟",hour:"小时",day:"天",month:"个月",year:"年",ago:"前",error:"NaN"};const e=e=>{e=new Date(t(e));const l=(e,t)=>Math.floor(e)+t,r=new function(){this.second=(Date.now()-e.getTime())/1e3,this.minute=this.second/60,this.hour=this.minute/60,this.day=this.hour/24,this.month=this.day/30,this.year=this.month/12},a=Object.keys(r).reverse().find(e=>r[e]>=1);return(a?l(r[a],this.lang[a]):this.lang.error)+this.lang.ago},t=e=>(e=new Date(e&&("number"==typeof e?e:e.replace(/-/g,"/").replace("T"," "))),!isNaN(e.getTime())&&e.getTime());return{init:({target:l="time",lang:r}={})=>{r&&(this.lang=r);for(let r of document.querySelectorAll(l)){const l=t(r.dateTime)||t(r.title)||t(r.innerHTML)||0;if(!l)return;r.title=new Date(l).toLocaleString(),r.innerHTML=e(l)}},format:e}};let jsonUrl="https://api.eallion.com/memos/memos.json?t="+Date.parse(new Date);document.querySelector("#ticker")&&(fetch(jsonUrl).then(e=>e.json()).then(e=>{for(var t="",l=e.data,r=0;r<l.length;r++){var a=new Date(1e3*l[r].createdTs).toLocaleString(),n=l[r].content;const e=e=>e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;");var i=e(n).replace(/```([\s\S]*?)```[\s]*/g," <code>$1</code> ").replace(/`([\s\S ]*?)`[\s]*/g," <code>$1</code> ").replace(/\!\[[\s\S]*?\]\(([\s\S]*?)\)/g,"$1").replace(/\[[\s\S]*?\]\(([\s\S]*?)\)/g,"$1").replace(/<video [^>]*src=['"](.+?[^'"]\.(mp4|webm|ogv)+)[^>]*>/g,"$1");t+=`<li class="item"><span class="datetime">${a}</span>：<a href="https://eallion.com/memos/">${i}</a></li>`}var o=document.querySelector("#ticker"),s='<i class=\'fab fa-twitter\'></i><div class="ticker-wrap"><ul class="ticker-list">',c="</ul></div>";resultAll=s+t+c,o.innerHTML=resultAll,window.Lately&&Lately.init({target:".datetime"})}),setInterval(function(){var e=document.querySelector(".ticker-list"),t=e.querySelectorAll(".item");for(i=0;i<t.length;i++)setTimeout(function(){e.appendChild(t[0])},2e3)},2e3));