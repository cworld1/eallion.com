window.Lately=new function(){this.lang={second:"秒",minute:"分钟",hour:"小时",day:"天",month:"个月",year:"年",ago:"前",error:"NaN"};const e=e=>{e=new Date(t(e));const i=(e,t)=>Math.floor(e)+t,n=new function(){this.second=(Date.now()-e.getTime())/1e3,this.minute=this.second/60,this.hour=this.minute/60,this.day=this.hour/24,this.month=this.day/30,this.year=this.month/12},r=Object.keys(n).reverse().find(e=>n[e]>=1);return(r?i(n[r],this.lang[r]):this.lang.error)+this.lang.ago},t=e=>(e=new Date(e&&("number"==typeof e?e:e.replace(/-/g,"/").replace("T"," "))),!isNaN(e.getTime())&&e.getTime());return{init:({target:i="time",lang:n}={})=>{n&&(this.lang=n);for(let n of document.querySelectorAll(i)){const i=t(n.dateTime)||t(n.title)||t(n.innerHTML)||0;if(!i)return;n.title=new Date(i).toLocaleString(),n.innerHTML=e(i)}},format:e}};let jsonUrl="https://api.eallion.com/memos/memos.json?t="+Date.parse(new Date);document.querySelector("#ticker")&&(fetch(jsonUrl).then(e=>e.json()).then(e=>{for(var t="",i=e.data,n=0;n<i.length;n++){var r=new Date(1e3*i[n].createdTs).toLocaleString(),a=i[n].content,o=a.replace(/```([\s\S]*?)```[\s]*/g," <code>$1</code> ").replace(/`([\s\S ]*?)`[\s]*/g," <code>$1</code> ").replace(/\!\[[\s\S]*?\]\(([\s\S]*?)\)/g,"$1").replace(/\[[\s\S]*?\]\(([\s\S]*?)\)/g,"$1").replace(/<video [^>]*src=['"](.+?[^'"]\.(mp4|webm|ogv)+)[^>]*>/g,"$1");t+=`<li class="item"><span class="datetime">${r}</span>：<a href="https://eallion.com/memos/">${o}</a></li>`}var s=document.querySelector("#ticker"),l='<i class=\'fab fa-twitter\'></i><div class="ticker-wrap"><ul class="ticker-list">',c="</ul></div>";resultAll=l+t+c,s.innerHTML=resultAll,window.Lately&&Lately.init({target:".datetime"})}),setInterval(function(){var e=document.querySelector(".ticker-list"),t=e.querySelectorAll(".item");for(i=0;i<t.length;i++)setTimeout(function(){e.appendChild(t[0])},2e3)},2e3));