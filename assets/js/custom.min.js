window.Lately=new function(){this.lang={second:"秒",minute:"分钟",hour:"小时",day:"天",month:"个月",year:"年",ago:"前",error:"NaN"};const format=date=>{date=new Date(_val(date));const floor=(num,_lang)=>Math.floor(num)+_lang,obj=new function(){this.second=(Date.now()-date.getTime())/1e3,this.minute=this.second/60,this.hour=this.minute/60,this.day=this.hour/24,this.month=this.day/30,this.year=this.month/12},key=Object.keys(obj).reverse().find(_=>obj[_]>=1);return(key?floor(obj[key],this.lang[key]):this.lang.error)+this.lang.ago},_val=date=>(date=new Date(date&&("number"==typeof date?date:date.replace(/-/g,"/").replace("T"," "))),!isNaN(date.getTime())&&date.getTime());return{init:({target:target="time",lang:lang}={})=>{lang&&(this.lang=lang);for(let el of document.querySelectorAll(target)){const date=_val(el.dateTime)||_val(el.title)||_val(el.innerHTML)||0;if(!date)return;el.title=new Date(date).toLocaleString(),el.innerHTML=format(date)}},format:format}};let jsonUrl="https://api.eallion.com/memos/memos.json?t="+Date.parse(new Date);fetch(jsonUrl).then(res=>res.json()).then(resdata=>{for(var result="",resultAll="",data=resdata.data,i=0;i<data.length;i++){var tickerTime,tickerContent,newtickerContent;result+=`<li class="item"><span class="datetime">${new Date(1e3*data[i].createdTs).toLocaleString()}</span>： <a href="https://eallion.com/memos/">${data[i].content.replace(/```([\s\S]*?)```[\s]*/g," <code>$1</code> ").replace(/`([\s\S ]*?)`[\s]*/g," <code>$1</code> ").replace(/\!\[[\s\S]*?\]\(([\s\S]*?)\)/g,"$1").replace(/\[[\s\S]*?\]\(([\s\S]*?)\)/g,"$1").replace(/<video [^>]*src=['"](.+?[^'"]\.(mp4|webm|ogv)+)[^>]*>/g,"$1")}</a></li>`}var tickerDom,tickerBefore,tickerAfter;resultAll='<i class=\'fab fa-twitter\'></i><div class="ticker-wrap"><ul class="ticker-list">'+result+"</ul></div>",document.querySelector("#ticker").innerHTML=resultAll,window.Lately&&Lately.init({target:".datetime"})}),setInterval((function(){var tickerWrap=document.querySelector(".ticker-list"),tickerItem=tickerWrap.querySelectorAll(".item");for(i=0;i<tickerItem.length;i++)setTimeout((function(){tickerWrap.appendChild(tickerItem[0])}),2e3)}),2e3);