---
title: "WannaCry 勒索病毒"
categories: ["日志"]
tags: ["安全","wannacry","勒索","病毒","445"]
draft: false
slug: "WannaCry"
date: "2017-05-15 11:04:00"
---

<img src="https://images.eallion.com/images/2017/05/15/3478243449.jpg!hugo.webp">

这几天WannaCry勒索病毒肆虐，重灾区看起来恰恰是看来起知识水平更高的高校和政府部门，不得不让人感叹。

我也是计算机专业的，还是网络专业的，想起当时有的同学，到毕业时连电脑的基本知识都不会，连Ghost装系统都不会，也是唏嘘。

在这次灾难中，360安全卫士，百度全家桶，这些平时牛逼吹上天的软件，也不见能帮用户做些什么。

## 我做了什么躲过一劫

- **不要使用默认的端口**

我家里的几台电脑也开了3389远程桌面，很庆幸没有被感染，因为路由器上的外网端口映射不是3389，这是我这些年来一直保护的好习惯，除了80和443，一般的协议都不会使用默认端口，如SSH不会用22端口，远程桌面不会用3389端口。

- **不要使用老系统**

我实在想不明白，在电脑硬件完全满足要求的情况下，个人电脑还要去安装老旧系统，而且新系统那么好用。比如我原来有个同事，高配电脑也只安装XP，他说是XP好用，我表示不理解。

- **不要安装任何安全卫士**

不要去相信360、腾讯管家，甚至是国外的某些安全软件。他们除了收集用户的隐私，拖慢电脑速度，也没什么大用处。

Win10的自带的Defened已经足够好用了啊！难道还有第三方的软件比微软更了解自己吗？

- **打开自动更新**

自动更新策略，对个人用户使用电脑几乎没有影响，完全没有关闭的必要。

就像这次勒索病毒事件，早在3月份的时候，微软就已经发布的安全补丁，而且微软还破例为早已停止支持的XP和2003也提供了这个补丁。但是上面提到的某些安全卫士居然屏蔽了这个补丁！！！

- **使用防火墙**

打开系统自带的防火墙就行了。
虽然上面说了不要安装国产安全软件，但是这里推荐一个安全软件：

　　<a href="http://www.huorong.cn/" target="_blank">火绒</a> <a href="http://www.huorong.cn/" target="_blank">http://www.huorong.cn</a>

我自己在用，感觉还行，很轻，很安静，不打扰。而且能自定义很多规则。能跟随用户成长。

- **使用Linux**

如果有兴趣，可以使用Linux（Ubuntu）作为自己的桌面系统。
我使用Win10和Ubuntu16.04的时间半对半吧，因为有些东西只能在Win上弄，没办法。如果不玩游戏，Ubuntu已经完全可以做为桌面使用了。

- **备份重要文件**

因为我早在2004年就吃过亏，当时所有的东西都保存在QQ网盘里，不幸的是当时那个QQ被盗，丢失所有文件，当时感觉天都塌下来的了。所以后来都养成了多处备份的习惯。

我目前的个人电脑上重要文件是微云一份，Dropbox一份，硬盘一份。实时增量同步。

网站数据是本地一份，阿里云OSS一份，腾讯云COS一份。脚本自己备份。

不管是文件备份，还是网站备份，尽量要做到 **自动**，因为手动去备份，人脑总是会有疏忽或忘记的时候。

就在前几天，我不小心在ECS上操作了一个错误脚本，运行了传说中的`rm -rf /*`，好在`ctrl+c`得及时，但数据已经不完整了。不得已`reinstall`，再回滚磁盘，3处备份2处可用，整个过程竟然10几分钟就恢复到可用状态了。只有某个网站丢失了几条评论。全靠备份的功劳啊。

- **关闭端口**

因为经常逛一些技术网站，得知消息的第一时间关闭了135、136、137、139、445端口。

Win10 1703（15063）版本，默认没有控制面板的直接入口了。

`开始` - `运行` - `输入“control”` - `Windows 防火墙` - `高级设置` - `入站规则` - `新建规则` - `端口` - `TCP` - `特定本地端口` - `输入“445”` - `阻止连接` - `取个名字`。

![QQ五笔截图未命名.png!hugo.webp](https://images.eallion.com/images/2017/05/15/2504829206.png!hugo.webp)
