jQuery(document).ready((function($){var t_img;$("photos img").each((function(){var _a=$("<a></a>").attr("href",this.src);$(this).wrap("<div class='photo'></div>").wrap(_a)})),isImgLoad((function(){var photos=document.querySelector("photos");photos&&waterfall(photos),$(window).resize((function(){photos&&waterfall(photos)}))}));var isLoad=!0;function isImgLoad(callback){$("photos img").each((function(){if(0===this.height)return isLoad=!1,!1})),isLoad?(clearTimeout(t_img),callback()):(isLoad=!0,t_img=setTimeout((function(){isImgLoad(callback)}),500))}})),function(global,undefined){"use strict";let _global,Lately=option=>{let target=option.target||".time",lang=option.lang||{second:"Áßí",minute:"ÂàÜÈíü",hour:"Â∞èÊó∂",day:"Â§©",month:"‰∏™Êúà",year:"Âπ¥",ago:"Ââç",error:"NaN"},_count=date=>{date=new Date(date);let second=((new Date).getTime()-date.getTime())/1e3,minute=second/60,hour=minute/60,day=hour/24,month=day/30,year=month/12,floor=(num,_lang)=>Math.floor(num)+_lang,result="";return result=year>=1?floor(year,lang.year):month>=1?floor(month,lang.month):day>=1?floor(day,lang.day):hour>=1?floor(hour,lang.hour):minute>=1?floor(minute,lang.minute):second>=1?floor(second,lang.second):lang.error,result+lang.ago};for(let contain of document.querySelectorAll(target)){let date="",date_time=contain.dateTime,title=contain.title,html=contain.innerHTML;if(date_time&&!isNaN(new Date(date_time=date_time.replace(/(.*)[a-z](.*)\+(.*)/gi,"$1 $2").replace(/-/g,"/"))))date=date_time;else if(title&&!isNaN(new Date(title=title.replace(/-/g,"/"))))date=title;else{if(!html||isNaN(new Date(html=html.replace(/-/g,"/"))))return;date=html}contain.title=date,contain.innerHTML=_count(date)}};_global=function(){return this||(0,eval)("this")}(),!("Lately"in _global)&&(_global.Lately=Lately)}(),jQuery(document).ready((function($){$(".post-content img:not(.avatar)").each((function(){var _b=$("<a></a>").attr({href:this.src,"data-fancybox":"gallery"});$(this).wrap(_b)}));var selector=".post-content a[rel!=link]:has(img:not(.non-box))";$('[data-fancybox="gallery"]').fancybox({selector:selector,loop:!1,arrows:!1,buttons:["close"],infobar:!1,ideScrollbar:!0,lang:"zh",i18n:{zh:{CLOSE:"ÂÖ≥Èó≠",NEXT:"‰∏ã‰∏ÄÂº†",PREV:"‰∏ä‰∏ÄÂº†",ERROR:"‰∏çËÉΩÂä†ËΩΩÂõæÁâáÔºå<br/>ËØ∑Á®çÂêéÂÜçËØï„ÄÇ",PLAY_START:"Êí≠ÊîæÂπªÁÅØÁâá",PLAY_STOP:"ÊöÇÂÅúÂπªÁÅØÁâá",FULL_SCREEN:"ÂÖ®Â±è",THUMBS:"Áº©Áï•Âõæ",DOWNLOAD:"‰∏ãËΩΩ",SHARE:"ÂàÜ‰∫´",ZOOM:"Áº©Êîæ"}}});var nav=$(".tocify");if(nav.length>0){nav.removeClass("hide");var navTop=$(".post-content").offset().top,w=$(window).width()/2+400;nav.css("left",w),nav.css("top",navTop),$(window).scroll((function(){var scrolls;$(this).scrollTop()>navTop?nav.css({top:0,position:"fixed"}):nav.css({top:navTop,position:"absolute"})}))}var parse_url=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,location_href=window.location.href.replace(parse_url,"$3");$(".post-content a:not(:has(img)),.author-name a,.links-item a,a.read-more").hover((function(){var this_href=$(this).attr("href"),replace_href=this_href.replace(parse_url,"$3");this_href!=replace_href&&location_href!=replace_href&&$(this).attr({target:"_blank",rel:"noopener noreferrer"})}))})),$(document).ready((function(){if($("#index-talk").length>0){function urlToLink(str){var re=/\bhttps?:\/\/(?!\S+(?:jpe?g|png|bmp|gif|webp|jfif|gif))\S+/g,re_forpic=/\bhttps?:[^:<>"]*\/([^:<>"]*)(\.(jpe?g)|(png)|(bmp)|(jfif)|(webp))/g,re_share=/(\#share)|(\#Share)/g;return str=(str=(str=str.replace(re,(function(website){return"üîó"}))).replace(re_forpic,(function(imgurl){return"üåÖ"}))).replace(re_share,"")}function Roll(){var list_li=$(".talk-list li"),cur_li=list_li.first(),last_li;list_li.last().after(cur_li)}jsonUrl="https://6561-eallion-8gkunp4re49bae66-1251347414.tcb.qcloud.la/json/talks.json",$.getJSON(jsonUrl+"?t="+Date.parse(new Date),(function(res){var bberCount=res.count,talksHtml="";$.each(res.data,(function(i,item){d=new Date(item.date),date=d.getFullYear()+"/"+(d.getMonth()+1)+"/"+d.getDate()+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds(),dataTime='<span class="datatime">'+date+"</span>",talksHtml+='<li class="item item-'+(i+1)+'">'+dataTime+'Ôºö <a href="https://eallion.com/talks/" target="_blank" rel="noopener noreferrer">'+urlToLink(item.content)+"</a></li>"})),$("#index-talk").append('<ul class="talk-list">'+talksHtml+"</ul>"),Lately({target:".datatime"})}));var timer=null;function startSetInterval(){timer=setInterval(Roll,9e6)}startSetInterval(),$("#index-talk").hover((function(){clearInterval(timer)}),(function(){startSetInterval()})),$("button").click((function(){$(this).parents("#index-talk").remove()}))}})),$("code").addClass("language-none");const container=document.querySelector(".container"),menu=document.querySelector(".menu"),mobileMenuTrigger=document.querySelector(".menu-trigger"),desktopMenu=document.querySelector(".menu__inner--desktop"),desktopMenuTrigger=document.querySelector(".menu__sub-inner-more-trigger"),menuMore=document.querySelector(".menu__sub-inner-more"),mobileQuery=getComputedStyle(document.body).getPropertyValue("--phoneWidth"),isMobile=()=>window.matchMedia(mobileQuery).matches,isMobileMenu=()=>{mobileMenuTrigger&&mobileMenuTrigger.classList.toggle("hidden",!isMobile()),menu&&menu.classList.toggle("hidden",isMobile()),menuMore&&menuMore.classList.toggle("hidden",!isMobile())};function getcolorscheme(){let storageColorScheme=localStorage.getItem("lightDarkMode"),element=document.getElementById("lightDarkMode"),targetDiv=document.getElementById("lightDarkOptions"),targets=targetDiv.getElementsByTagName("span"),screen=document.getElementById("is-open");element.addEventListener("click",()=>{targetDiv.classList.toggle("hidden"),screen.classList.toggle("hidden")});for(let target of targets)target.addEventListener("click",()=>{let targetName=target.getAttribute("name"),icon=switchMode(targetName),old_icon=element.firstElementChild.getAttribute("xlink:href");element.firstElementChild.setAttribute("xlink:href",icon),element.firstElementChild.classList.add("icon"),localStorage.setItem("lightDarkMode",targetName),targetDiv.classList.toggle("hidden"),screen.classList.toggle("hidden");let event=new Event("themeChanged");document.dispatchEvent(event)});screen.addEventListener("click",()=>{targetDiv.classList.toggle("hidden"),screen.classList.toggle("hidden")})}function switchMode(mode){let icon="";switch(mode){case"Light":window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",switchDarkMode),icon="#icon-sun",document.body.classList.remove("dark");break;case"Dark":window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",switchDarkMode),icon="#icon-md-moon",document.body.classList.add("dark");break;case"Auto":icon="#icon-dark";const isDarkMode=window.matchMedia("(prefers-color-scheme: dark)");switchDarkMode(isDarkMode),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",switchDarkMode)}return icon}function switchDarkMode(e){e.matches?document.body.classList.add("dark"):document.body.classList.remove("dark")}menu&&menu.addEventListener("click",e=>e.stopPropagation()),menuMore&&menuMore.addEventListener("click",e=>e.stopPropagation()),isMobileMenu(),document.body.addEventListener("click",()=>{isMobile()||!menuMore||menuMore.classList.contains("hidden")?isMobile()&&!menu.classList.contains("hidden")&&menu.classList.add("hidden"):menuMore.classList.add("hidden")}),window.addEventListener("resize",isMobileMenu),mobileMenuTrigger&&mobileMenuTrigger.addEventListener("click",e=>{e.stopPropagation(),menu&&menu.classList.toggle("hidden")}),desktopMenuTrigger&&desktopMenuTrigger.addEventListener("click",e=>{e.stopPropagation(),menuMore&&menuMore.classList.toggle("hidden"),menuMore&&menuMore.getBoundingClientRect().right>container.getBoundingClientRect().right&&(menuMore.style.left="auto",menuMore.style.right=0)}),function($){"use strict";$.fn.toTop=function(opt){var elem=this,win=$(window),doc=$("html, body"),options=$.extend({autohide:!0,offset:420,speed:500,position:!0,right:15,bottom:30},opt);elem.css({cursor:"pointer"}),options.autohide&&elem.css("display","none"),options.position&&elem.css({position:"fixed",right:options.right,bottom:options.bottom}),elem.click((function(){doc.animate({scrollTop:0},options.speed)})),win.scroll((function(){var scrolling=win.scrollTop();options.autohide&&(scrolling>options.offset?elem.fadeIn(options.speed):elem.fadeOut(options.speed))}))}}(jQuery),$(".to-top").toTop({autohide:!0,offset:420,speed:500,position:!0,right:15,bottom:30});