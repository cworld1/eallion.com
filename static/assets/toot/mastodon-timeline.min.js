window.addEventListener("load",(()=>{new MastodonApi({container_body_id:"mt-body",default_theme:"auto",instance_url:"https://m.eallion.com",timeline_type:"profile",user_id:"01RVAVVGAPXR989VKK1BQV6BFS",profile_name:"@eallion",hashtag_name:"",toots_limit:"20",hide_unlisted:!1,hide_reblog:!1,hide_replies:!1,markdown_blockquote:!1,text_max_lines:"0",link_see_more:"See more posts at Mastodon"})}));let MastodonApi=function(t){this.DEFAULT_THEME=t.default_theme||"auto",this.INSTANCE_URL=t.instance_url,this.USER_ID=t.user_id||"",this.PROFILE_NAME=this.USER_ID?t.profile_name:"",this.TIMELINE_TYPE=t.timeline_type||"local",this.HASHTAG_NAME=t.hashtag_name||"",this.TOOTS_LIMIT=t.toots_limit||"20",this.HIDE_UNLISTED=void 0!==t.hide_unlisted&&t.hide_unlisted,this.HIDE_REBLOG=void 0!==t.hide_reblog&&t.hide_reblog,this.HIDE_REPLIES=void 0!==t.hide_replies&&t.hide_replies,this.MARKDOWN_BLOCKQUOTE=void 0!==t.markdown_blockquote&&t.markdown_blockquote,this.TEXT_MAX_LINES=t.text_max_lines||"0",this.LINK_SEE_MORE=t.link_see_more,this.mtBodyContainer=document.getElementById(t.container_body_id),this.applyTheme(),this.getToots()};MastodonApi.prototype.applyTheme=function(){const t=function(t){document.documentElement.setAttribute("data-theme",t)};if("auto"===this.DEFAULT_THEME){let e=window.matchMedia("(prefers-color-scheme: dark)");e.matches?t("dark"):t("light"),e.addEventListener("change",(e=>{e.matches?t("dark"):t("light")}))}else t(this.DEFAULT_THEME)},MastodonApi.prototype.getToots=function(){let t=this,e="";"profile"===this.TIMELINE_TYPE?e=`${this.INSTANCE_URL}/api/v1/accounts/${this.USER_ID}/statuses?limit=${this.TOOTS_LIMIT}`:"hashtag"===this.TIMELINE_TYPE?e=`${this.INSTANCE_URL}/api/v1/timelines/tag/${this.HASHTAG_NAME}?limit=${this.TOOTS_LIMIT}`:"local"===this.TIMELINE_TYPE&&(e=`${this.INSTANCE_URL}/api/v1/timelines/public?local=true&limit=${this.TOOTS_LIMIT}`),fetch(e,{method:"get"}).then((t=>{if(t.ok)return t.json();throw 404===t.status?new Error("404 Not found",{cause:t}):new Error(t.status)})).then((e=>{this.mtBodyContainer.innerHTML="";for(let i in e)("public"==e[i].visibility||!this.HIDE_UNLISTED&&"unlisted"==e[i].visibility)&&(t.HIDE_REBLOG&&e[i].reblog||t.HIDE_REPLIES&&e[i].in_reply_to_id||o.call(t,e[i],i));if(""===this.mtBodyContainer.innerHTML)this.mtBodyContainer.setAttribute("role","none"),this.mtBodyContainer.innerHTML='<div class="mt-error"><span class="mt-error-icon">üì≠</span><br/><strong>Sorry, no toots to show</strong><br/><div class="mt-error-message">Got '+e.length+' toots from the server but due to the "hide filters" applied, no toot is shown</div></div>';else if(t.LINK_SEE_MORE){let e="";"profile"===this.TIMELINE_TYPE?e=t.PROFILE_NAME:"hashtag"===this.TIMELINE_TYPE?e="tags/"+this.HASHTAG_NAME:"local"===this.TIMELINE_TYPE&&(e="public/local");let o='<div class="mt-footer"><a href="'+t.INSTANCE_URL+"/"+e+'" class="btn" target="_blank" rel="nofollow noopener noreferrer">'+t.LINK_SEE_MORE+"</a></div>";this.mtBodyContainer.parentNode.insertAdjacentHTML("beforeend",o)}})).catch((t=>{this.mtBodyContainer.innerHTML='<div class="mt-error"><span class="mt-error-icon">‚ùå</span><br/><strong>Sorry, request failed:</strong><br/><div class="mt-error-message">'+t+"</div></div>",this.mtBodyContainer.setAttribute("role","none")}));let o=function(t,e){let o,i,a,s,l;var n='<svg xmlns="http://www.w3.org/2000/svg" width="1rem" height="1rem" viewBox="0 0 2048 2048"><path fill="#1d9bf0" d="m1845 1024l124 155q18 23 28 50t10 57q0 30-9 57t-26 49t-41 38t-52 24l-191 53q2 51 5 103t4 104q0 36-13 67t-37 54t-55 37t-68 14q-31 0-61-11l-185-70l-109 165q-24 37-62 57t-83 21q-44 0-82-20t-63-58l-109-165l-185 70q-30 11-61 11q-36 0-67-13t-55-37t-37-55t-14-67q0-52 3-104t6-103l-191-53q-29-8-52-24t-40-38t-26-49t-10-57q0-29 10-56t28-51l124-155L79 869q-38-47-38-107q0-30 9-57t26-49t40-38t53-24l191-53q-2-51-5-103t-4-104q0-36 13-67t37-54t55-37t68-14q31 0 61 11l185 70L879 78q24-37 62-57t83-21q44 0 82 20t63 58l109 165l185-70q30-11 61-11q36 0 67 13t55 37t37 55t14 67q0 52-3 104t-6 103l191 53q28 8 52 24t40 38t26 49t10 57q0 60-38 107l-124 155zm-949 369l569-568l-114-114l-455 456l-199-200l-114 114l313 312z"/></svg>';t.reblog?(s=t.reblog.url,o='<a href="'+t.reblog.account.url+'" class="mt-avatar mt-avatar-boosted" style="background-image:url('+t.reblog.account.avatar+');" rel="nofollow noopener noreferrer" target="_blank"><div class="mt-avatar mt-avatar-booster" style="background-image:url('+t.account.avatar+');"></div><span class="visually-hidden">'+t.account.username+" avatar</span></a>",i='<div class="mt-user"><a href="'+t.reblog.account.url+'" rel="nofollow noopener noreferrer" target="_blank"><div>Charles Chin</div><div>'+n+'</div><div class="mt-id">@eallion ¬∑ </div><span class="visually-hidden"> post</span></a></div>',l=this.formatDate(t.reblog.created_at)):(s=t.url,o='<a href="'+t.account.url+'" class="mt-avatar" style="background-image:url('+t.account.avatar+');" rel="nofollow noopener noreferrer" target="_blank"><span class="visually-hidden">'+t.account.username+" avatar</span></a>",i='<div class="mt-user"><a href="'+t.account.url+'" rel="nofollow noopener noreferrer" target="_blank"><div>Charles Chin</div><div>'+n+'</div><div class="mt-id">@eallion ¬∑ </div><span class="visually-hidden"> post</span></a></div>',l=this.formatDate(t.created_at));let r="";if("0"!==this.TEXT_MAX_LINES&&(r="truncate",document.documentElement.style.setProperty("--text-max-lines",this.TEXT_MAX_LINES)),""!==t.spoiler_text){let e=this.formatTootText(t.content);a='<div class="toot-text">'+t.spoiler_text+' <button type="button" class="spoiler-link" aria-expanded="false">Show more</button><div class="spoiler-text-hidden">'+e+"</div></div>"}else if(t.reblog&&""!==t.reblog.content){a='<div class="toot-text '+r+'"><div>'+this.formatTootText(t.reblog.content)+"</div></div>"}else{a='<div class="toot-text '+r+'"><div>'+this.formatTootText(t.content)+"</div></div>"}let d="";if(t.media_attachments.length>0)for(let e in t.media_attachments)d=this.replaceMedias(t.media_attachments[e],t.sensitive);if(t.reblog&&t.reblog.media_attachments.length>0)for(let e in t.reblog.media_attachments)d=this.replaceMedias(t.reblog.media_attachments[e],t.sensitive);let c="",h="";if(t.poll){for(let e in t.poll.options)h+="<li>"+t.poll.options[e].title+"</li>";c='<div class="toot-poll"><ul>'+h+"</ul></div>"}let m='<div class="toot-date"><a href="'+s+'" rel="nofollow noopener noreferrer" tabindex="-1" target="_blank">'+l+"</a></div>",p='<article class="mt-toot" aria-posinset="'+(Number(e)+1)+'" aria-setsize="'+this.TOOTS_LIMIT+'" tabindex="0"><div class="mt-meta">'+i+m+"</div>"+a+d+c+"</article>";this.mtBodyContainer.insertAdjacentHTML("beforeend",p)};this.mtBodyContainer.addEventListener("click",(function(t){"article"!=t.target.localName&&"article"!=t.target.offsetParent.localName&&"img"!=t.target.localName||i(t),"button"==t.target.localName&&"spoiler-link"==t.target.className&&a(t)})),this.mtBodyContainer.addEventListener("keydown",(function(t){"Enter"===event.code&&"article"==t.target.localName&&i(t)}));let i=function(t){let e=t.target.closest(".mt-toot").dataset.location;"a"!==t.target.localName&&"span"!==t.target.localName&&"button"!==t.target.localName&&e&&window.open(e,"_blank")},a=function(t){const e=t.target.nextSibling;"img"===e.localName?(t.target.parentNode.classList.remove("toot-media-spoiler"),t.target.style.display="none"):(e.classList.contains("spoiler-text-hidden")||e.classList.contains("spoiler-text-visible"))&&("Show more"==t.target.textContent?(e.classList.remove("spoiler-text-hidden"),e.classList.add("spoiler-text-visible"),t.target.setAttribute("aria-expanded","true"),t.target.textContent="Show less"):(e.classList.remove("spoiler-text-visible"),e.classList.add("spoiler-text-hidden"),t.target.setAttribute("aria-expanded","false"),t.target.textContent="Show more"))}},MastodonApi.prototype.formatTootText=function(t){let e=t;return e=this.addTarget2hashtagMention(e),this.MARKDOWN_BLOCKQUOTE&&(e=this.replaceHTMLtag(e,"<p>&gt;","</p>","<blockquote><p>","</blockquote></p>")),e},MastodonApi.prototype.addTarget2hashtagMention=function(t){let e=t.replaceAll('rel="tag"','rel="tag" target="_blank"');return e=e.replaceAll('class="u-url mention"','class="u-url mention" target="_blank"'),e},MastodonApi.prototype.replaceHTMLtag=function(t,e,o,i,a){if(t.includes(e)){const s=new RegExp(e+"(.*?)"+o,"gi");return t.replace(s,i+"$1"+a)}return t},MastodonApi.prototype.replaceMedias=function(t,e){let o=e||!1;return'<div class="toot-media '+(o?"toot-media-spoiler":"")+' img-ratio14_7 loading-spinner">'+(o?'<button class="spoiler-link">Show content</button>':"")+'<img onload="removeSpinner(this)" onerror="removeSpinner(this)" src="'+t.preview_url+'" alt="" loading="lazy" /></div>'},MastodonApi.prototype.formatDate=function(t){let e=new Date(t),o=e.getMonth()+" "+e.getDate()+", "+e.getFullYear();return moment(o).twitterLong()},removeSpinner=function(t){const e="loading-spinner";let o=t.closest("."+e);o&&o.classList.remove(e)};